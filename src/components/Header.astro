---
interface Props {
  customTitle?: string;
}

const { customTitle } = Astro.props;
const displayTitle = customTitle || "Alan Ye";
---

<style>
    /* Hide system scrollbar only on desktop (md and up) */
    @media (min-width: 768px) {
        :global(html) {
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* Internet Explorer 10+ */
        }
        
        :global(html::-webkit-scrollbar) {
            width: 0;
            background: transparent; /* Chrome/Safari/Webkit */
        }
    }

    /* CSS custom properties for responsive behavior */
    :root {
        --header-bg-opacity: 0;
        --logo-scale: 1;
        --mobile-logo-opacity: 1;
        --logo-weight: 300;
        --logo-width: 100;
    }

    /* Dynamic font weight and width based on scroll and hover */
    .site-logo {
        font-variation-settings: 
            'wght' var(--logo-weight, 300),
            'slnt' 0;
        transition: font-variation-settings 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Desktop header background */
    @media (min-width: 768px) {
        #site-header {
            background-color: rgba(255, 255, 255, var(--header-bg-opacity));
            backdrop-filter: blur(calc(var(--header-bg-opacity) * 8px));
        }
    }

    /* Desktop logo scaling */
    @media (min-width: 768px) {
        #site-logo-desktop {
            transform: scale(var(--logo-scale));
            transition: transform 0.1s ease-out;
        }
    }

    /* Mobile logo opacity */
    @media (max-width: 767px) {
        #site-logo-mobile {
            opacity: var(--mobile-logo-opacity);
            transform: scale(1) !important; /* Always maintain size on mobile */
            transition: opacity 0.1s ease-out;
        }
    }

    /* Desktop mobile logo scaling (when mobile element is shown on desktop) */
    @media (min-width: 768px) {
        #site-logo-mobile {
            transform: scale(var(--logo-scale));
            opacity: 1;
            transition: transform 0.1s ease-out;
        }
    }
</style>

<header class="fixed top-0 left-0 z-50 pointer-events-none transition-all duration-300 ease-out" id="site-header">
    <!-- Desktop: Vertical layout on left-top -->
    <div class="hidden md:block">
        <div class="flex items-start justify-start pl-6 pt-8">
            <a 
                href="/" 
                class="
                    pointer-events-auto
                    block
                    origin-top-left
                    transition-all
                    duration-300
                    ease-out
                    hover:text-slate-600
                    cursor-pointer
                    select-none
                    site-logo
                    no-underline inline-block
                "
                id="site-logo-desktop"
                style="writing-mode: vertical-rl; text-orientation: mixed;"
            >
                <span class="text-3xl lg:text-4xl font-light text-slate-900">
                    {displayTitle}
                </span>
            </a>
        </div>
    </div>
    
    <!-- Mobile: Horizontal layout on top -->
    <div class="md:hidden w-full px-4 py-3">
        <a 
            href="/" 
            class="
                pointer-events-auto
                block
                transition-all
                duration-300
                ease-out
                hover:text-slate-600
                active:text-slate-700
                cursor-pointer
                select-none
                site-logo
                no-underline inline-block
            "
            id="site-logo-mobile"
        >
            <span class="text-lg font-light text-slate-900">
                {displayTitle}
            </span>
        </a>
    </div>
</header>

<!-- Scroll Indicator -->
<div class="hidden md:block fixed right-8 top-1/2 z-50 pointer-events-none" style="transform: translateY(-50%);">
    <div class="flex flex-col items-center">
        <!-- Progress container -->
        <div class="relative w-0.5 h-20 bg-slate-200 rounded-full overflow-hidden">
            <div 
                class="absolute bottom-0 left-0 w-full bg-slate-700 rounded-full transition-all duration-150 ease-out"
                id="scroll-progress"
                style="height: 0%;"
            ></div>
        </div>
    </div>
</div>

<script type="module">
    import initHeader from "../scripts/header";
    initHeader();
</script>
